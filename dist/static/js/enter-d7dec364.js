import{a5 as L,d as q,C as s,a3 as A,a1 as F,a6 as N,c as z,a as n,u as g,g as c,a7 as D,a8 as E,a9 as I,r as m,o as M,b as R,e as k}from"./index-572b2af3.js";const U=[{prop:"username",label:"用户名"},{prop:"region",label:"地区"},{prop:"phone",label:"手机号"},{prop:"cardId",label:"身份证号",slots:[{render(t,o,a){var u;return[t("span",{type:"primary",size:"small"},((u=a==null?void 0:a.identityInformation)==null?void 0:u.id)||"-")]}}]},{prop:"userLevel",label:"用户等级"},{prop:"userLevel",label:"用户状态",slots:[{render(t,o,a){return[t("span",{type:"primary"},a.deletedAt?"已注销":"正常")]}}]},{prop:"cashTotal",label:"账户金额(HK$)"},{prop:"createdAt",label:"创建时间"},{prop:"option",label:"操作",width:"200px",slots:[{render(t,o,a){return[t(L,{type:a.deletedAt?"danger":"primary",size:"small",onClick(){o.emit("onLogOut",a)}},a.deletedAt?"已注销":"注销")]}},{render(t,o,a){return[t(L,{type:"primary",size:"small",onClick(){o.emit("onShareData",a)}},"查看分享数据")]}}]}],$=[{prop:"username",label:"用户名"},{prop:"phone",label:"手机号"}],J=[{name:"用户名称",key:"nickname",showLabel:!0},{name:"手机号",key:"phone",showLabel:!0},{name:"用户状态",key:"status",type:"select",showLabel:!0,options:[{value:"0",label:"全部"},{value:"2",label:"注销"},{value:"1",label:"正常"}]}],j={class:"bs"},w={class:"dialog-footer"},K=q({__name:"enter",setup(t){const o=U,a=J,u=$,b=s([]),d=s({}),f=A({}),r=s(!1),h=s(0),i=s({page:1,limit:10}),_=s([]);F(()=>{p()});const p=async()=>{const{data:e}=await N(Object.assign(d.value,{current:i.value.page,pageSize:i.value.limit}));b.value=e==null?void 0:e.list,h.value=e==null?void 0:e.totalCount},O=e=>{r.value=!0,_.value=e.userShareList},T=e=>{if(e.deletedAt){D.error("该账号已注销");return}E.confirm("确认注销该账号吗？",{type:"warning"}).then(()=>{I(e._id).then(()=>{D.success("注销成功"),p()})}).catch(()=>{})},V=e=>{i.value=e,p()};function y(e){f.value=JSON.stringify(e)==="{}"?{}:e,d.value=JSON.stringify(e)==="{}"?{}:e,p()}return(e,l)=>{const x=m("SrmFilter"),C=m("SrmTable"),S=m("el-button"),B=m("el-dialog");return M(),z("div",j,[n(x,{items:g(a),"search-params":f,onSearch:y,onReset:y},null,8,["items","search-params"]),n(C,{columns:g(o),sourceData:b.value,pageRequest:i.value,listTotal:h.value,reqData:d.value,onOnShareData:O,onOnLogOut:T,onCurrentChange:V},null,8,["columns","sourceData","pageRequest","listTotal","reqData"]),n(B,{modelValue:r.value,"onUpdate:modelValue":l[2]||(l[2]=v=>r.value=v),title:"分享数据",width:"30%"},{footer:c(()=>[R("span",w,[n(S,{onClick:l[0]||(l[0]=v=>r.value=!1)},{default:c(()=>[k("取消")]),_:1}),n(S,{type:"primary",onClick:l[1]||(l[1]=v=>r.value=!1)},{default:c(()=>[k(" 确认 ")]),_:1})])]),default:c(()=>[n(C,{sourceData:_.value,columns:g(u)},null,8,["sourceData","columns"])]),_:1},8,["modelValue"])])}}});export{K as default};
