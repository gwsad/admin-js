import{a5 as m,d as C,C as l,a3 as I,a1 as w,ak as D,c as E,a as d,u as y,a8 as b,al as f,r as h,o as q}from"./index-d75711de.js";const B=[{prop:"amount",width:"120px",label:"提现金额（HK$）"},{prop:"phone",label:"卡主名称",slots:[{render(a,n,e){return[a("span",{type:"primary",text:"成功"},e.accountInfo.bank?e.accountInfo.bank.username:"-")]}}]},{prop:"phone",width:"200px",label:"银行卡号",slots:[{render(a,n,e){return[a("span",{type:"primary"},e.accountInfo.bank?e.accountInfo.bank.bank:"-")]}}]},{prop:"phone",width:"200px",label:"支付宝名称",slots:[{render(a,n,e){return[a("span",{type:"primary"},e.accountInfo.alipay?e.accountInfo.alipay.account:"-")]}}]},{prop:"phone",width:"200px",label:"支付宝账号",slots:[{render(a,n,e){return[a("span",{type:"primary"},e.accountInfo.alipay?e.accountInfo.alipay.accountName:"-")]}}]},{prop:"createdAt",label:"创建时间"},{prop:"updatedAt",label:"提现状态",width:"100px",fixed:"left",slots:[{render(a,n,e){return[a("span",{type:"primary"},e.status.message)]}}]},{prop:"option",label:"操作",width:"200px",fixed:"right",slots:[{render(a,n,e){return[a(m,{type:"primary",text:"成功",style:`display: ${e.status.message==="处理中"?"inline-block":"none"}`,onClick(){n.emit("onSuccess",e)}},"打款成功"),a(m,{type:"danger",text:"失败",size:"small",style:`display: ${e.status.message==="处理中"?"inline-block":"none"}`,onClick(){n.emit("onError",e)}},"审核失败")]}}]}],F=[{name:"提现状态",key:"status",type:"select",showLabel:!0,options:[{value:"0",label:"全部"},{value:"1",label:"审批中"},{value:"3",label:"审批失败"},{value:"2",label:"打款成功"}]}],T={class:"bs"},L=C({__name:"enter",setup(a){const n=B,e=F,c=l([]),p=l({status:0}),v=I({}),i=l(0),r=l({page:1,limit:10});w(()=>{s()});const s=async()=>{c.value=[];const{data:t}=await D(Object.assign(p.value,{current:r.value.page,pageSize:r.value.limit}));c.value=t.list,i.value=t.totalCount},g=t=>{r.value=t,s()};function u(t){p.value=JSON.stringify(t)==="{}"?{}:t,s()}const _=t=>{b.confirm("确认打款成功吗？",{type:"success"}).then(async()=>{const o={id:t._id,type:{status:2}};await f(o),s()}).catch(o=>{})},x=t=>{b.confirm("确认审核失败吗？",{type:"warning"}).then(async()=>{const o={id:t._id,type:{status:3,rejectMessage:""}};await f(o),s()}).catch(()=>{})};return(t,o)=>{const k=h("SrmFilter"),S=h("SrmTable");return q(),E("div",T,[d(k,{items:y(e),"search-params":v,onSearch:u,onReset:u},null,8,["items","search-params"]),d(S,{columns:y(n),sourceData:c.value,pageRequest:r.value,listTotal:i.value,reqData:p.value,onOnSuccess:_,onOnError:x,onCurrentChange:g},null,8,["columns","sourceData","pageRequest","listTotal","reqData"])])}}});export{L as default};
